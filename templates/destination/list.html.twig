{% extends 'layouts/layout.html.twig' %}

{% block title %}Alle Reiseziele | TravelExplorer{% endblock %}

{% block content %}
    <div class="destinations-page">
        <section class="page-header">
            <div class="container">
                <h1>Unsere Reiseziele</h1>
                <p>Entdecken Sie die sch√∂nsten Orte der Welt</p>
            </div>
        </section>

        <section class="destinations-list-section">
            <div class="container">
                {% if destinations|length > 0 %}
                    <div class="destinations-grid">
                        {% for destination in destinations %}
                            {% if destination.published %}
                                <div class="destination-card">
                                    <a href="{{ path('destination_detail', {'key': destination.key}) }}" class="card-link">
                                        <div class="destination-image">
                                            {% if destination.image %}
                                                <img src="{{ destination.image.getPath() ~ destination.image.getFilename() }}" 
                                                     alt="{{ destination.name }}">
                                            {% else %}
                                                <div style="width: 100%; height: 250px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                                    <svg width="60" height="60" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                                    </svg>
                                                </div>
                                            {% endif %}
                                            {% if destination.tag %}
                                                <span class="destination-tag">{{ destination.tag }}</span>
                                            {% endif %}
                                        </div>
                                        
                                        <div class="destination-content">
                                            <h3 class="destination-title">{{ destination.name }}</h3>
                                            <p class="destination-country">üìç {{ destination.country }}</p>
                                            
                                            {% if destination.rating %}
                                                <div class="destination-rating">
                                                    <span class="stars">
                                                        {% set fullStars = destination.rating|round(0, 'floor') %}
                                                        {% set hasHalfStar = (destination.rating - fullStars) >= 0.5 %}
                                                        {% for i in 1..fullStars %}‚òÖ{% endfor %}{% if hasHalfStar %}‚òÜ{% endif %}
                                                    </span>
                                                    <span class="rating-text">
                                                        {{ destination.rating }}
                                                        {% if destination.reviews %}
                                                            ({{ destination.reviews }} Bewertungen)
                                                        {% endif %}
                                                    </span>
                                                </div>
                                            {% endif %}
                                            
                                            <p class="destination-description">
                                                {{ destination.description|striptags|slice(0, 150) }}...
                                            </p>
                                            
                                            {% if destination.highlights and destination.highlights|length > 0 %}
                                                <div class="destination-highlights">
                                                    <div class="highlights-list">
                                                        {% for highlight in destination.highlights|slice(0, 3) %}
                                                            <span class="highlight-badge">{{ highlight }}</span>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            {% endif %}
                                        </div>
                                        
                                        <div class="destination-footer">
                                            {% if destination.price %}
                                                <span class="destination-price">{{ destination.price }}</span>
                                            {% endif %}
                                            <span class="destination-link">
                                                Mehr erfahren ‚Üí
                                            </span>
                                        </div>
                                    </a>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="no-destinations">
                        <p>Keine Reiseziele gefunden.</p>
                    </div>
                {% endif %}
            </div>
        </section>
    </div>
{% endblock %}